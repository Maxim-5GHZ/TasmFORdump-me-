## 1. Введение
**Assembler** — это язык низкого уровня, где команды практически напрямую соответствуют машинным инструкциям процессора.
**TASM (Turbo Assembler)** — популярный компилятор от Borland для архитектуры x86. Обычно используется для написания 16-битных программ под DOS.

## 2. Подготовка рабочего места
Поскольку современные ОС (Windows 10/11, macOS, Linux) не поддерживают запуск 16-битных приложений напрямую, вам понадобится эмулятор.

1.  **Скачайте DOSBox** (эмулятор среды MS-DOS).
2.  **Скачайте пакет TASM**. Он должен содержать файлы `TASM.EXE` (компилятор) и `TLINK.EXE` (компоновщик).
3.  **Создайте рабочую папку** (например, `C:\ASM`), положите туда `TASM.EXE`, `TLINK.EXE` и создавайте там свои файлы с кодом (`.asm`).
4.  **Монтирование в DOSBox**:
    *   Запустите DOSBox.
    *   Введите команду: `mount c c:\asm` (где `c:\asm` — путь к вашей папке).
    *   Перейдите на диск C: `c:`

## 3. Структура программы
В TASM удобнее всего использовать **упрощенные директивы сегментации**. Шаблон любой программы выглядит так:

```asm
.model small      ; Модель памяти (код и данные в разных сегментах, но < 64Кб)
.stack 100h       ; Выделение стека (256 байт)

.data
    ; СЕГМЕНТ ДАННЫХ
    ; Здесь объявляются переменные
    peremennaya db 10       ; db = define byte (8 бит)
    message     db 'Hello$' ; Строка

.code
    ; СЕГМЕНТ КОДА
start:              ; Метка начала программы
    ; 1. Инициализация сегмента данных (ОБЯЗАТЕЛЬНО!)
    mov ax, @data
    mov ds, ax

    ; 2. ТЕЛО ПРОГРАММЫ
    ; Здесь пишется ваш код

    ; 3. Завершение программы (Выход в DOS)
    mov ah, 4Ch     ; Функция DOS 4Ch - завершить процесс
    int 21h         ; Вызов прерывания

end start           ; Конец файла и указание точки входа
```

## 4. Основные понятия

### Регистры (Ваши "карманы" для данных)
Процессор x86 имеет регистры общего назначения (16 бит):
*   **AX (Accumulator):** Для арифметики и ввода/вывода. Делится на `AH` (старший байт) и `AL` (младший).
*   **BX (Base):** Часто используется для адресации массивов.
*   **CX (Count):** Счётчик для циклов.
*   **DX (Data):** Для умножения/деления и вывода данных.

### Основные команды
*   `MOV куда, что` — Пересылка данных (присваивание).
    *   *Пример:* `mov ax, 5` (AX = 5).
*   `ADD куда, что` — Сложение.
    *   *Пример:* `add ax, bx` (AX = AX + BX).
*   `SUB куда, что` — Вычитание.
*   `INC куда` / `DEC куда` — Увеличить/уменьшить на 1.
*   `INT номер` — Вызов прерывания (обращение к системе).

## 5. Работа с прерыванием INT 21h (Функции DOS)
Взаимодействие с экраном и клавиатурой происходит через прерывание `21h`. Перед вызовом нужно положить номер функции в регистр **AH**.

**Самые частые функции:**

| Функция (AH) | Описание | Параметры |
| :--- | :--- | :--- |
| **09h** | Вывод строки на экран | `DX` = адрес строки (строка должна оканчиваться знаком `$`) |
| **02h** | Вывод одного символа | `DL` = код символа (ASCII) |
| **01h** | Ввод символа с эхом | Результат сохраняется в `AL` |
| **4Ch** | Выход из программы | - |

## 6. Пример №1: "Hello, World!"
Создайте файл `hello.asm` и напишите:

```asm
.model small
.stack 100h

.data
    helloStr db 'Privet, mir!', 0Dh, 0Ah, '$' 
    ; 0Dh, 0Ah - это переход на новую строку
    ; $ - признак конца строки для функции 09h

.code
start:
    ; Инициализация DS
    mov ax, @data
    mov ds, ax

    ; Вывод строки
    mov ah, 09h         ; Функция вывода строки
    lea dx, helloStr    ; Загружаем адрес строки в DX (LEA = Load Effective Address)
    int 21h             ; "Дёрнуть" DOS

    ; Выход
    mov ah, 4Ch
    int 21h
end start
```

## 7. Компиляция и запуск
В окне DOSBox выполните команды по очереди:

1.  **Компиляция** (создает объектный файл `.OBJ`):
    ```bash
    tasm hello.asm
    ```
    *Если ошибок нет, вы увидите сообщение "Error messages: None".*

2.  **Линковка** (создает исполняемый файл `.EXE`):
    ```bash
    tlink hello.obj
    ```

3.  **Запуск**:
    ```bash
    hello.exe
    ```

## 8. Пример №2: Сложение двух цифр
Программа, которая складывает 2 и 3, переводит результат в символ ASCII и выводит на экран.

```asm
.model small
.stack 100h
.data
    ; тут пусто, переменные не нужны
.code
start:
    mov ax, @data
    mov ds, ax

    mov al, 2       ; Положить 2 в AL
    add al, 3       ; Прибавить 3 к AL. Теперь AL = 5

    ; Чтобы вывести цифру '5' на экран, нужно получить её ASCII код.
    ; Код '0' = 30h (48), '1' = 31h... '5' = 35h.
    ; Поэтому прибавляем 30h (или символ '0') к числу.
    add al, '0'     ; Превращаем число 5 в символ '5'

    mov dl, al      ; Для вывода символа (функция 02h) код должен быть в DL
    mov ah, 02h     ; Функция вывода символа
    int 21h

    ; Выход
    mov ah, 4Ch
    int 21h
end start
```

## 9. Советы для новичка
1.  **`MOV DS, AX`** — забыть эти две строчки в начале — самая частая ошибка. Без них программа не увидит ваши переменные.
2.  **Размерность**: Нельзя делать `mov ax, al` (16 бит в 8 бит) или `mov al, bx`. Операнды должны быть одного размера.
3.  **Комметарии**: Ассемблер сложен для чтения. Пишите комментарии после `;` к каждой строке, описывая логику, а не команду (Плохо: *; прибавить 1*. Хорошо: *; переход к следующему элементу массива*).
4.  **Turbo Debugger (TD)**: Если программа падает или считает неправильно, используйте отладчик. Запуск: `td filename.exe`. Клавиша `F8` позволяет идти по шагам.
